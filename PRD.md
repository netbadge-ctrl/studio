# 数据中心智能运维助手 - 产品需求文档 (PRD)

| 版本 | 日期       | 作者   | 变更内容             |
| :--- | :--------- | :----- | :------------------- |
| V1.0 | 2024-05-24 | Gemini | 初始版本，基于现有功能创建 |

---

## 1. 项目概述

### 1.1. 项目背景

随着数据中心规模的持续扩大和业务复杂性的增加，传统的工单处理和设备运维方式已难以满足高效、精准、安全的操作要求。一线运维工程师需要在复杂的机房环境中进行大量的物理操作，而主管则需要实时掌握团队的工作状态和负载情况。本项目旨在开发一款以移动端为核心的智能运维助手，通过现代化的 UI/UX 和智能化功能，赋能数据中心运维团队。

### 1.2. 产品目标

- **提升效率**：简化工程师从接收工单到完成操作的全流程，减少不必要的人工核对和信息查找时间。
- **降低风险**：通过清晰的指引、智能的配置比对和异常诊断，降低物理操作的出错率。
- **增强管理可视性**：为主管提供实时的团队任务视图和数据洞察，辅助其进行更合理的资源调配。
- **优化用户体验**：打造一款符合移动端操作习惯、界面清爽、交互流畅的现代化工具，提升员工的工作满意度。

### 1.3. 核心用户

- **数据中心运维工程师**：工单的执行者，负责具体的设备安装、配置、更换和故障处理。
- **数据中心运维主管**：团队的管理者，负责工单的分配、进度跟踪和团队资源协调。

---

## 2. 用户角色与核心场景

### 2.1. 运维工程师 (Alice)

- **角色描述**：一线操作人员，每天需要处理多个运维工单，熟悉机房环境，但需要清晰的指令来完成复杂的硬件配置任务。
- **核心场景**：
    - **上班后**：打开应用，在“我的任务”页面查看今天被分配到的所有工单。
    - **准备阶段**：点击一个工单，进入详情页。仔细核对需要操作的设备清单（序列号、位置）和需要领用的备件清单（型号、数量、特殊性能要求）。
    - **操作阶段**：到达机柜前，扫描设备序列号快速定位到操作界面。根据指引图片或视频，完成硬件的安装或更换。实时更新设备状态。
    - **异常处理**：如遇检测异常，查看系统生成的诊断报告，了解是硬件配置错误还是网络问题，并采取相应措施。
    - **完成工作**：完成所有设备操作后，将工单标记为完成。

### 2.2. 运维主管 (Bob)

- **角色描述**：团队领导，关心整体工作进度、团队成员的负载均衡以及潜在的风险点。
- **核心场景**：
    - **日常管理**：打开“主管仪表盘”，查看所有工单的状态（待处理、已分配、进行中、已完成等）。
    - **任务分配**：发现“待处理”工单，点击“分配”按钮。在弹出的移动端友好的分配界面中，查看每个工程师的当前负载（进行中任务数、今日已完成数），选择最合适的工程师进行分配。
    - **进度跟踪**：通过仪表盘随时了解关键工单的进展状态。

---

## 3. 功能详述 (Features)

### 3.1. 工程师视图 - 我的工单

- **功能 ID**: FEAT-ENG-01
- **描述**: 应用的默认首页，以移动端友好的卡片列表形式展示当前登录工程师被分配的所有工单。
- **UI/UX 规范**:
    - 每个工单是一个独立的、可点击的卡片。
    - 卡片上应清晰展示工单的核心信息：标题、ID、状态、设备数量、机房模块等。
    - 不同状态的工单（如“进行中”、“已分配”）应有不同的颜色或图标标识，便于快速区分。
    - 点击卡片可导航至“工单详情页”。

### 3.2. 主管视图 - 主管分配工单

- **功能 ID**: FEAT-LEAD-01
- **描述**: 主管的核心管理界面，以列表形式展示所有工单，并提供分配功能。
- **UI/UX 规范**:
    - 列表应清晰展示工单标题、状态和当前被分配人。
    - 每行提供一个“分配”按钮，点击后弹出“分配工单”对话框。
    - **分配对话框 (移动端优化)**:
        - 放弃传统的表格布局，采用**列表卡片**设计。
        - 每个工程师是一个卡片，清晰展示姓名、当前进行中工单数、今日完成数。
        - 通过点击卡片或卡片上的复选框来选择/取消选择工程师，点击区域要足够大，易于操作。
        - 底部提供“保存分配”和“取消”按钮。

### 3.3. 工单详情页 (准备阶段)

- **功能 ID**: FEAT-DETAIL-01
- **描述**: 用户从工单列表点击后进入的页面，用于操作前的准备和信息核对。
- **UI/UX 规范**:
    - 页面主要由“设备清单”和“所需备件”两个信息卡片组成。
    - **设备清单**:
        - 以列表形式展示所有需要操作的设备序列号及其物理位置。
    - **所需备件**:
        - 卡片高度应根据内容**动态自适应**，避免过多无用空白或内容截断。
        - **对有特殊性能要求的备件（如高性能网卡）**：
            - 在型号后增加一个醒目的图标（如 ⚡️）和“有性能要求”的文本提示。
            - 该行应设计为**可展开的 Accordion** 样式。点击后，展开区域清晰地展示“性能要求”和“推荐备件SN清单”，为工程师领料提供精确指导。

### 3.4. 工单操作页 (执行阶段)

- **功能 ID**: FEAT-OPERATE-01
- **描述**: 工程师进行实际物理操作的核心界面。
- **UI/UX 规范**:
    - 顶部提供一个醒目的设备扫描/查找入口，方便工程师快速定位到目标设备。
    - **设备操作指引**:
        - 每个设备是一个可展开的 Accordion 项，展示其当前状态。
        - 展开后，提供图片或视频指引，直观展示操作步骤。
        - **配件操作列表**: 清晰列出需要“装”或“卸”的配件型号，并用不同颜色/图标区分两种操作。**此列表不应展示插槽位置等冗余信息**，保持界面的绝对简洁。
    - **底部操作栏**:
        - 提供一个常驻底部的操作栏，包含“扫描设备”、“更多操作”（批量检测、增领/回库备件）和“完成工单”等核心操作。

### 3.5. 备件管理

- **功能 ID**: FEAT-PARTS-01
- **描述**: 处理领用和回库备件的流程。
- **UI/UX 规范**:
    - **增领备件**:
        - 提供清晰的列表，展示此工单需要领用的备件型号。
        - 用户可点击“扫码坏件”来记录更换下来的坏件序列号，为申领新备件提供依据。
    - **备件回库 (移动端优化)**:
        - 弹窗标题统一为“备件回库”。
        - 弹窗内放弃表格，采用**列表卡片**设计，每个待回库的备件作为一个卡片。
        - 卡片内垂直堆叠展示备件型号、序列号和应放回的“回库盒号”，信息一目了然。

### 3.6. 异常检测报告

- **功能 ID**: FEAT-ANOMALY-01
- **描述**: 当设备“结单检测”失败时，向工程师展示一份清晰、可操作的诊断报告。
- **UI/UX 规范**:
    - 弹窗应采用移动端友好的设计，信息**垂直布局**，避免使用 Tabs 或多栏对比。
    - **仅展示错误信息**，过滤掉所有正常的检测项。
    - **硬件错误**:
        - 清晰地列出所有线上实际配置与目标配置不一致的硬件。
        - 对每一个不一致的插槽，都明确展示“线上”和“目标”的备件信息，并用醒目的视觉元素（颜色、图标）高亮差异。
    - **网络错误**:
        - 清晰地列出所有检测失败的网络项及其失败原因。
    - 如果所有检测项都通过，则应明确提示“所有测试均已通过”。

### 3.7. 服务器搬迁流程

- **功能 ID**: FEAT-MOVE-01
- **描述**: 为“服务器搬迁”类型的工单设计的特殊流程。
- **UI/UX 规范**:
    - **搬出操作**:
        - 提供一个专门的“搬出操作”表单，用于记录物流信息。
        - **日期选择器 (移动端优化)**: 点击日期输入框后，应**以居中的模态对话框（Dialog）形式**弹出日历，而不是在按钮旁弹出浮窗。这提供了更稳定、更可靠的移动端选择体验。

---

## 4. 非功能性需求

- **设计语言**: 整体采用现代、简洁的设计风格。以卡片、列表和清晰的弹窗为主要交互模式，符合主流移动应用的设计范式。
- **响应式设计**: 优先为移动端进行设计（Mobile-First），同时兼容桌面端访问。
- **性能**: 界面加载和交互响应需保持流畅，避免卡顿。
- **可访问性 (A11y)**: 所有交互组件（如弹窗）需符合无障碍设计标准，例如，为对话框提供必要的标题（即使在视觉上隐藏）。

---

## 5. 技术栈概述

- **前端框架**: Next.js (App Router)
- **语言**: TypeScript
- **UI 库**: React, ShadCN UI, Tailwind CSS
- **图表**: Recharts
- **图标**: Lucide React
- **AI 功能** (规划中): Genkit (Google AI)
